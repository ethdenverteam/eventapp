# Детализированное техническое задание: Веб-приложение для мероприятий

## 1. Общая информация

**Цель проекта**: Создать веб-приложение для просмотра, организации, продвижения, управления и проведения мероприятий аналогично lu.ma.

**Основная функциональность**: Пользователи должны иметь возможность создавать и настраивать страницы событий, приглашать гостей, продавать билеты, отслеживать посещаемость и взаимодействовать с аудиторией.

---

## 2. Детальные функциональные требования

### 2.1 Пользовательские роли и права доступа

#### Гость (неавторизованный пользователь)
- Просмотр публичных событий
- Регистрация и авторизация
- Покупка билетов (после регистрации)

#### Зарегистрированный пользователь
- Все функции гостя
- Создание и управление собственными событиями
- Личный профиль с настройками
- История участия в событиях
- Управление билетами

#### Администратор
- Модерация контента и событий
- Управление пользователями
- Системная статистика

### 2.2 Система регистрации и авторизации

#### Обязательные поля при регистрации:
- Email (уникальный)
- Пароль (минимум 8 символов)
- Имя и фамилия
- Номер телефона (опционально)

#### Авторизация:
- Логин по email + пароль
- Авторизация через Telegram бота (бот знает аккаунт пользователя)
- JWT токены для сессий
- Восстановление пароля через email (только при привязанном email)

#### Личный кабинет:
- Редактирование профиля
- Смена пароля
- Настройки уведомлений
- История событий

### 2.3 Управление событиями

#### Создание события:
- Название события (обязательно)
- Описание (с поддержкой Markdown)
- Дата и время начала/окончания
- Место проведения:
  - Физический адрес
  - Онлайн (ссылка на Zoom/Teams)
  - Гибридный формат
- Формат события:
  - Открытое (видно всем)
  - По приглашению (только по ссылке)
  - Приватное (только для участников)

#### Кастомизация страницы:
- Загрузка баннера (JPG/PNG, макс. 5MB)
- Выбор цветовой схемы (5 предустановленных тем)
- Настройка логотипа
- Дополнительные поля (организатор, контакты, теги)

#### Управление событиями:
- Редактирование всех параметров
- Копирование события как шаблона
- Удаление (с подтверждением)
- Архивирование

### 2.4 Система билетов и монетизация

#### Типы билетов:
- Бесплатные
- Платные (с указанием цены)
- Ранняя регистрация (скидка)
- VIP билеты
- Групповые билеты

#### Промокоды:
- Процентная скидка
- Фиксированная скидка
- Ограничение по количеству использований
- Срок действия

#### Оплата (базовая версия):
- Интеграция с простыми платежными системами
- Безопасное хранение данных платежей
- Автоматическая генерация электронных билетов
- Отправка билетов на email

### 2.5 Личный календарь и интеграции

#### Экспорт событий:
- Google Calendar (.ics файл)
- Яндекс.Календарь (.ics файл)
- Outlook (.ics файл)

#### Уведомления:
- Email подтверждение регистрации
- Напоминания за день до события
- Уведомления об изменениях в событии

### 2.6 Система приглашений и регистрации

#### Приглашения:
- Персональные ссылки для каждого участника
- QR-коды для быстрой регистрации
- Подтверждение участия
- Лимиты на количество участников
- Ожидание в очереди при превышении лимита

#### Регистрация:
- Простая форма с минимальными полями
- Валидация данных
- Автоматическое подтверждение

### 2.7 Управление участниками

#### Список гостей:
- Просмотр всех зарегистрированных участников
- Экспорт в CSV
- Поиск и фильтрация
- Статусы участия (подтвержден, отменен, ожидает)

#### Чек-ин система:
- QR-сканер для отметки посещения
- Ручная отметка по списку
- Статистика посещаемости

### 2.8 Интерактивные элементы (базовая версия)

#### Обратная связь:
- Простая форма отзывов после события
- Рейтинг события (1-5 звезд)
- Комментарии участников

---

## 3. Требования к дизайну и UX

### 3.1 Принципы дизайна
- Современный минималистичный стиль
- Аналогия с lu.ma по простоте и элегантности
- Использование цветовых акцентов
- Крупные кнопки и четкая типографика

### 3.2 Структура интерфейса
- Одностраничный вид главной страницы
- Отдельные страницы для событий
- Личный кабинет пользователя
- Адаптивный дизайн (Mobile First)

### 3.3 Темы оформления
- Светлая тема (по умолчанию)
- Темная тема
- Переключение между темами

### 3.4 Доступность
- Соответствие WCAG 2.1 AA
- Поддержка скринридеров
- Контрастные цвета
- Навигация с клавиатуры

---

## 4. Технические требования

### 4.1 Frontend (рекомендуемый стек)

#### Основные технологии:
- **React 18** с TypeScript
- **Next.js 14** для SSR и оптимизации
- **Tailwind CSS** для стилизации
- **Framer Motion** для анимаций

#### Дополнительные библиотеки:
- **React Hook Form** для форм
- **Zod** для валидации
- **React Query** для управления состоянием
- **NextAuth.js** для аутентификации

### 4.2 Backend (рекомендуемый стек)

#### Основные технологии:
- **Node.js** с **Express.js**
- **TypeScript** для типизации
- **Prisma** как ORM
- **PostgreSQL** как основная БД

#### Дополнительные компоненты:
- **JWT** для аутентификации
- **bcrypt** для хеширования паролей
- **Multer** для загрузки файлов
- **Nodemailer** для отправки email

### 4.3 База данных

#### Основные таблицы:
- `users` - пользователи
- `events` - события
- `tickets` - билеты
- `registrations` - регистрации
- `payments` - платежи
- `invitations` - приглашения

#### Связи:
- Пользователь может создавать много событий
- Событие может иметь много билетов
- Билет может иметь много регистраций
- Регистрация связана с пользователем и билетом

### 4.4 Инфраструктура

#### Хостинг:
- **Vercel** для Frontend (бесплатный план)
- **Railway** или **Render** для Backend (бесплатные планы)
- **Supabase** для PostgreSQL (бесплатный план)

#### Дополнительные сервисы:
- **Cloudinary** для хранения изображений
- **SendGrid** для email (бесплатный план)
- **Telegram Bot API** для авторизации

### 4.5 Безопасность

#### Аутентификация:
- JWT токены с коротким сроком жизни
- Refresh токены
- Защита от CSRF атак

#### Валидация:
- Валидация на Frontend и Backend
- Санитизация пользовательского ввода
- Защита от SQL инъекций

#### Файлы:
- Проверка типов файлов
- Ограничение размера файлов
- Безопасное хранение

---

## 5. Архитектура приложения

### 5.1 Структура проекта

```
event-app/
├── frontend/                 # Next.js приложение
│   ├── components/          # React компоненты
│   ├── pages/              # Страницы приложения
│   ├── hooks/              # Кастомные хуки
│   ├── utils/              # Утилиты
│   └── styles/             # Стили
├── backend/                 # Express.js сервер
│   ├── controllers/        # Контроллеры
│   ├── middleware/         # Middleware
│   ├── routes/             # API маршруты
│   ├── services/           # Бизнес-логика
│   └── models/             # Модели данных
└── shared/                  # Общие типы и утилиты
    └── types/              # TypeScript типы
```

### 5.2 API Endpoints

#### Аутентификация:
- `POST /api/auth/register` - регистрация
- `POST /api/auth/login` - вход
- `POST /api/auth/telegram` - вход через Telegram
- `POST /api/auth/refresh` - обновление токена
- `POST /api/auth/logout` - выход

#### События:
- `GET /api/events` - список событий
- `POST /api/events` - создание события
- `GET /api/events/:id` - получение события
- `PUT /api/events/:id` - обновление события
- `DELETE /api/events/:id` - удаление события

#### Билеты:
- `GET /api/events/:id/tickets` - билеты события
- `POST /api/events/:id/tickets` - создание билета
- `POST /api/tickets/:id/register` - регистрация на билет

#### Пользователи:
- `GET /api/users/profile` - профиль пользователя
- `PUT /api/users/profile` - обновление профиля
- `GET /api/users/events` - события пользователя

### 5.3 Состояние приложения

#### Frontend:
- React Context для глобального состояния
- React Query для серверного состояния
- Local Storage для настроек пользователя

#### Backend:
- Сессии в Redis (опционально)
- Кэширование частых запросов
- Логирование действий пользователей

---

## 6. Этапы разработки

### 6.1 MVP (Минимально жизнеспособный продукт) - 4-6 недель

#### Неделя 1-2: Базовая структура
- Настройка Next.js и Express.js
- Базовая структура БД
- Система аутентификации
- Главная страница

#### Неделя 3-4: Основной функционал
- Создание и редактирование событий
- Система билетов
- Регистрация участников
- Базовый дизайн

#### Неделя 5-6: Дополнительные функции
- Личный кабинет
- Управление участниками
- Экспорт в календарь
- Тестирование и исправление багов

### 6.2 Расширенная версия - 8-10 недель

#### Дополнительные функции:
- Промокоды и скидки
- Система платежей
- QR-коды для чек-ина
- Аналитика и отчеты
- Мобильное приложение (React Native)

---

## 7. Тестирование

### 7.1 Типы тестирования
- Unit тесты для бизнес-логики
- Integration тесты для API
- E2E тесты для критических сценариев
- Тестирование производительности

### 7.2 Инструменты тестирования
- **Jest** для unit тестов
- **Supertest** для API тестов
- **Playwright** для E2E тестов
- **Lighthouse** для производительности

---

## 8. Развертывание и CI/CD

### 8.1 Автоматизация
- **GitHub Actions** для CI/CD
- Автоматические тесты при push
- Автоматическое развертывание на staging
- Автоматическое развертывание на production

### 8.2 Мониторинг
- Логирование ошибок (Sentry)
- Мониторинг производительности
- Uptime мониторинг
- Алерты при критических ошибках

---

## 9. Документация

### 9.1 Техническая документация
- API документация (Swagger/OpenAPI)
- Руководство по развертыванию
- Архитектурные решения
- Руководство по разработке

### 9.2 Пользовательская документация
- Руководство пользователя
- FAQ
- Видео-инструкции
- Справочная система

---

## 10. Оценка ресурсов

### 10.1 Команда разработки
- **Frontend разработчик** (React/Next.js) - 1 чел.
- **Backend разработчик** (Node.js/Express) - 1 чел.
- **UI/UX дизайнер** - 1 чел. (частично)
- **DevOps инженер** - 1 чел. (частично)

### 10.2 Временные затраты
- **MVP**: 4-6 недель
- **Полная версия**: 8-10 недель
- **Тестирование и исправление**: 2-3 недели
- **Документация**: 1-2 недели

### 10.3 Бюджет
- **Хостинг и сервисы**: $50-100/месяц
- **Домены и SSL**: $20-50/год
- **Дополнительные инструменты**: $100-200/месяц

---

## 11. Риски и митигация

### 11.1 Технические риски
- **Риск**: Сложность интеграции с Telegram
  - **Митигация**: Изучение API заранее, создание прототипа

- **Риск**: Проблемы с производительностью при большом количестве пользователей
  - **Митигация**: Кэширование, оптимизация запросов, масштабирование БД

### 11.2 Бизнес-риски
- **Риск**: Недостаточная функциональность для пользователей
  - **Митигация**: MVP тестирование, сбор обратной связи

- **Риск**: Конкуренция с существующими решениями
  - **Митигация**: Уникальные особенности, лучший UX

---

## 12. Критерии успеха

### 12.1 Технические критерии
- Время загрузки страницы < 3 секунд
- 99.9% uptime
- Поддержка 1000+ одновременных пользователей
- Безопасность (прохождение security audit)

### 12.2 Бизнес-критерии
- Регистрация 100+ пользователей в первый месяц
- Создание 50+ событий в первый месяц
- Положительные отзывы от 80% пользователей
- Успешное проведение 10+ платных мероприятий

---

## 13. Заключение

Данное техническое задание описывает создание современного веб-приложения для управления мероприятиями с использованием проверенных технологий и простых решений. Проект разбит на логические этапы, что позволяет получить работающий продукт в кратчайшие сроки.

**Рекомендуемый стек для быстрого старта:**
- Frontend: Next.js + React + TypeScript + Tailwind CSS
- Backend: Node.js + Express + TypeScript + Prisma
- База данных: PostgreSQL
- Хостинг: Vercel + Railway + Supabase

**Приоритеты разработки:**
1. Базовая функциональность (события, билеты, регистрация)
2. Пользовательский интерфейс и UX
3. Система платежей и монетизация
4. Дополнительные функции и интеграции
